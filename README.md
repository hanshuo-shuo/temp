# temp

# Solution to Exercise 5.1.35

Let's tackle each part of the exercise systematically.

## Part (a)

**Verify that $\mathcal{F}_\tau$ is a σ-algebra and if $\tau(\omega) = n$ is non-random then $\mathcal{F}_\tau = \mathcal{F}_n$.**

### Showing $\mathcal{F}_\tau$ is a σ-algebra

A σ-algebra must satisfy three properties:

1. **Containment of the sample space:** $\Omega \in \mathcal{F}_\tau$.
2. **Closure under complementation:** If $A \in \mathcal{F}_\tau$, then $A^c \in \mathcal{F}_\tau$.
3. **Closure under countable unions:** If $\{A_i\}_{i=1}^\infty \subseteq \mathcal{F}_\tau$, then $\bigcup_{i=1}^\infty A_i \in \mathcal{F}_\tau$.

Let's verify each property:

1. **Containment of $\Omega$:**
   \[
   \Omega \cap \{\omega : \tau(\omega) \leq n\} = \{\omega : \tau(\omega) \leq n\} \in \mathcal{F}_n \quad \forall n.
   \]
   Hence, $\Omega \in \mathcal{F}_\tau$.

2. **Closure under complementation:**
   Suppose $A \in \mathcal{F}_\tau$. Then for all $n$:
   \[
   A^c \cap \{\omega : \tau(\omega) \leq n\} = \{\omega : \tau(\omega) \leq n\} \setminus A.
   \]
   Since $A \cap \{\tau \leq n\} \in \mathcal{F}_n$ and $\mathcal{F}_n$ is a σ-algebra, it follows that $A^c \cap \{\tau \leq n\} \in \mathcal{F}_n$. Therefore, $A^c \in \mathcal{F}_\tau$.

3. **Closure under countable unions:**
   Let $\{A_i\}_{i=1}^\infty \subseteq \mathcal{F}_\tau$. Then:
   \[
   \left( \bigcup_{i=1}^\infty A_i \right) \cap \{\tau \leq n\} = \bigcup_{i=1}^\infty \left( A_i \cap \{\tau \leq n\} \right).
   \]
   Since each $A_i \cap \{\tau \leq n\} \in \mathcal{F}_n$ and $\mathcal{F}_n$ is closed under countable unions, it follows that $\bigcup_{i=1}^\infty A_i \in \mathcal{F}_\tau$.

Therefore, $\mathcal{F}_\tau$ is indeed a σ-algebra.

### If $\tau(\omega) = n$ is non-random, then $\mathcal{F}_\tau = \mathcal{F}_n$

Assume $\tau$ is a constant function, i.e., $\tau(\omega) = n$ for all $\omega \in \Omega$.

For any $A \in \mathcal{F}_\tau$:
\[
A \cap \{\tau \leq m\} = \begin{cases}
\emptyset & \text{if } m < n, \\
A & \text{if } m \geq n.
\end{cases}
\]
- If $m < n$, $\emptyset \in \mathcal{F}_m$ trivially.
- If $m \geq n$, then $A \in \mathcal{F}_m$ since $\mathcal{F}_m \subseteq \mathcal{F}_n$ for $m \geq n$.

Thus, $A \in \mathcal{F}_n$. Conversely, if $A \in \mathcal{F}_n$, then for any $m$:
\[
A \cap \{\tau \leq m\} = \begin{cases}
\emptyset & \text{if } m < n, \\
A & \text{if } m \geq n.
\end{cases}
\]
Hence, $A \in \mathcal{F}_\tau$. Therefore, $\mathcal{F}_\tau = \mathcal{F}_n$.

## Part (b)

**Suppose $X_n \in \mathcal{F}_n$ for all $n$ (including $n = \infty$ unless $\tau$ is finite for all $\omega$). Show that then $X_\tau \in \mathcal{F}_\tau$. Deduce that $\sigma(\tau) \subseteq \mathcal{F}_\tau$ and $X_k \mathbf{1}_{\{\tau=k\}} \in \mathcal{F}_\tau$ for any non-random $k$.**

### Showing $X_\tau \in \mathcal{F}_\tau$

Define $X_\tau$ as:
\[
X_\tau(\omega) = X_{\tau(\omega)}(\omega).
\]
To show $X_\tau \in \mathcal{F}_\tau$, we observe that for any Borel set $B \subseteq \mathbb{R}$:
\[
X_\tau^{-1}(B) = \bigcup_{n=0}^\infty \left( \{X_n \in B\} \cap \{\tau = n\} \right).
\]
Since $X_n \in \mathcal{F}_n$ and $\{\tau = n\} \in \mathcal{F}_\tau$ (as will be shown below), it follows that each $\{X_n \in B\} \cap \{\tau = n\} \in \mathcal{F}_\tau$. Therefore, $X_\tau$ is measurable with respect to $\mathcal{F}_\tau$.

### Deduce $\sigma(\tau) \subseteq \mathcal{F}_\tau$

The σ-algebra $\sigma(\tau)$ is generated by the sets $\{\tau = k\}$ for all $k$. Since:
\[
\{\tau = k\} = \{\tau \leq k\} \setminus \{\tau \leq k-1\} \in \mathcal{F}_\tau \quad \forall k,
\]
it follows that $\sigma(\tau) \subseteq \mathcal{F}_\tau$.

### Showing $X_k \mathbf{1}_{\{\tau=k\}} \in \mathcal{F}_\tau$ for any non-random $k$

If $k$ is non-random, then by Part (a), $\mathcal{F}_\tau = \mathcal{F}_k$. Since $X_k \in \mathcal{F}_k$ and $\{\tau = k\} \in \mathcal{F}_k$, their product $X_k \mathbf{1}_{\{\tau=k\}}$ is also in $\mathcal{F}_k = \mathcal{F}_\tau$.

## Part (c)

**Show that for any integrable $\{Y_n\}$ and non-random $k$,**
\[
\mathbb{E}\left[ Y_\tau \mathbf{1}_{\{\tau=k\}} \mid \mathcal{F}_\tau \right] = \mathbb{E}\left[ Y_k \mid \mathcal{F}_k \right] \mathbf{1}_{\{\tau=k\}}.
\]

### Proof

Since $k$ is non-random, $\mathcal{F}_\tau = \mathcal{F}_k$.

On the event $\{\tau = k\}$, we have $Y_\tau = Y_k$. Hence:
\[
Y_\tau \mathbf{1}_{\{\tau=k\}} = Y_k \mathbf{1}_{\{\tau=k\}}.
\]
Taking the conditional expectation with respect to $\mathcal{F}_\tau$:
\[
\mathbb{E}\left[ Y_\tau \mathbf{1}_{\{\tau=k\}} \mid \mathcal{F}_\tau \right] = \mathbb{E}\left[ Y_k \mathbf{1}_{\{\tau=k\}} \mid \mathcal{F}_\tau \right].
\]
Since $\mathbf{1}_{\{\tau=k\}}$ is $\mathcal{F}_\tau$-measurable and $Y_k$ is $\mathcal{F}_k$-measurable:
\[
\mathbb{E}\left[ Y_k \mathbf{1}_{\{\tau=k\}} \mid \mathcal{F}_\tau \right] = \mathbf{1}_{\{\tau=k\}} \mathbb{E}\left[ Y_k \mid \mathcal{F}_k \right].
\]
Therefore:
\[
\mathbb{E}\left[ Y_\tau \mathbf{1}_{\{\tau=k\}} \mid \mathcal{F}_\tau \right] = \mathbb{E}\left[ Y_k \mid \mathcal{F}_k \right] \mathbf{1}_{\{\tau=k\}}.
\]

## Part (d)

**Show that if $\theta \leq \tau$ then $\mathcal{F}_\theta \subseteq \mathcal{F}_\tau$.**

### Proof

Assume $\theta$ and $\tau$ are $\mathcal{F}_n$-stopping times with $\theta \leq \tau$ almost surely.

Let $A \in \mathcal{F}_\theta$. By definition of the stopped σ-algebra:
\[
A \cap \{\tau \leq n\} = A \cap \{\theta \leq n\} \subseteq \mathcal{F}_n.
\]
Since $\theta \leq \tau$, we have:
\[
\{\theta \leq n\} \subseteq \{\tau \leq n\}.
\]
Therefore:
\[
A \cap \{\tau \leq n\} = A \cap \{\theta \leq n\} \in \mathcal{F}_n.
\]
This holds for all $n$, so $A \in \mathcal{F}_\tau$. Hence, $\mathcal{F}_\theta \subseteq \mathcal{F}_\tau$.
